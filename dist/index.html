<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>BoamahProject</title>
    <link rel="stylesheet" href="assets/bootstrap/css/bootstrap.min.css">
    <link rel="stylesheet" href="assets/fonts/font-awesome.min.css">
    <link rel="stylesheet" href="assets/fonts/ionicons.min.css">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Abel">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Amethysta">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Cinzel">
    <link rel="stylesheet" href="assets/css/Popup-Element-Overlay.css">
    <link rel="stylesheet" href="assets/css/Popup-Element-Overlay1.css">
    <link rel="stylesheet" href="assets/css/styles.css">
    <link rel="stylesheet" type="text/css" href="assets/dist/chartist.min.css">

</head>

<body style="background-color:#252831;">
    <div>
        <div class="container">
            <div class="row" style="margin-top:40px;">
                <div class="col-sm-4 col-md-4 col-lg-4 col-xl-3 d-flex justify-content-start"><i class="fa fa-leaf align-items-start" style="color:rgb(154,162,170);font-size:50px;"></i>
                    <h1 style="color:rgb(154,162,170);">&nbsp;CAS</h1>
                </div>
                <div class="col-sm-8 col-md-8 col-lg-8 col-xl-9">
                    <p style="color:rgb(89,94,96);">DASHBOARD</p>
                    <h2 style="color:rgb(238,240,241);font-family:Amethysta, serif;font-size:27px;">&nbsp;Overview</h2>
                    <hr style="color:rgb(227,229,231);background-color:rgb(227,229,231);margin-top:20px;">
                </div>
            </div>
        </div>
    </div>
            <script type="text/javascript" src="assets/dist/chartist.min.js"></script>

    <div>
        <div class="container">
            <div class="row">
                <div class="col-sm-4 col-md-4 col-lg-4 col-xl-3 d-flex flex-column justify-content-center">
                    <p class="align-self-start" style="color:rgb(89,94,96);"><br>DASHBOARD</p>
                    <div><a class="align-self-start" href="#" style="color:rgb(154,162,170);">Overview</a></div>
                    <div><a class="align-self-start" href="bank.html" style="color:rgb(154,162,170);">Bank Accounts</a></div>
                    
                    <div><a class="align-self-start" href="collection.html" style="color:rgb(154,162,170);">Offertory &amp; Others</a></div>
                    <div><a class="align-self-start" href="transaction.html" style="color:rgb(154,162,170);">Transactions</a></div>
                </div>
                <div class="col-sm-9 col-md-8 col-lg-8 col-xl-9 d-flex flex-row">
                    <div class="align-self-start ct-chart ct-octave" id="chart1" style="width:45%;height:270%;background-color: #f0f1f3;"></div>
                    <div class="align-self-start ct-chart ct-octave" id="chart2" style="width:45%;height:270%;background-color: #f0f1f3;margin-left:10%;"></div>
                </div>
            </div>
        </div>
    </div>
    <?php 

    require 'active.php';
         $r = bank::find('all');
         $result = transaction::find_by_sql('SELECT `bank_id`, SUM(`amount`) AS `total` FROM `transactions` GROUP BY `bank_id`');   

          foreach ($r as $name) {
             $arr1[] = $name->name;
          }

          foreach ($result as $n) {
             $arr2[] = $n->total;
            }

        $arr3 =json_encode($arr1);
        $arr4 =json_encode($arr2);
    ?>
    <script>
      // Initialize a Line chart in the container with the ID chart1
      new Chartist.Line('#chart1', {
        labels: <?= $arr3 ?>,
        series: [<?= $arr4 ?>]
      });

      // Initialize a Line chart in the container with the ID chart2
      new Chartist.Bar('#chart2', {
        labels: <?= $arr3 ?>,
        series: [<?= $arr4 ?>]
      });
    </script>
    <script src="assets/js/jquery.min.js"></script>
    <script src="assets/bootstrap/js/bootstrap.min.js"></script>
    <script src="assets/js/main.js"></script>
    <script src="assets/js/Popup-Element-Overlay.js"></script>
</body>

</html>